!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("Geetest requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t){"use strict";function e(t){this._obj=t}function n(t){var n=this;new e(t)._each(function(t,e){n[t]=e})}if("undefined"==typeof t)throw new Error("Geetest requires browser environment");var o=t.document,r=t.Math,i=o.getElementsByTagName("head")[0];e.prototype={_each:function(t){var e=this._obj;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n]);return this}},n.prototype={api_server:"api.geetest.com",protocol:"http://",type_path:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){var t=this;return c(t.type)?t.fallback_config[t.type]:t.new_captcha?t.fallback_config.fullpage:t.fallback_config.slide},_extend:function(t){var n=this;new e(t)._each(function(t,e){n[t]=e})}};var a=function(t){return"number"==typeof t},c=function(t){return"string"==typeof t},f=function(t){return"boolean"==typeof t},u=function(t){return"object"==typeof t&&null!==t},s=function(t){return"function"==typeof t},l={},p={},d=function(){return parseInt(1e4*r.random())+(new Date).valueOf()},g=function(t,e){var n=o.createElement("script");n.charset="UTF-8",n.async=!0,n.onerror=function(){e(!0)};var r=!1;n.onload=n.onreadystatechange=function(){r||n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||(r=!0,setTimeout(function(){e(!1)},0))},n.src=t,i.appendChild(n)},h=function(t){return t.replace(/^https?:\/\/|\/$/g,"")},_=function(t){return t=t.replace(/\/+/g,"/"),0!==t.indexOf("/")&&(t="/"+t),t},v=function(t){if(!t)return"";var n="?";return new e(t)._each(function(t,e){(c(e)||a(e)||f(e))&&(n=n+encodeURIComponent(t)+"="+encodeURIComponent(e)+"&")}),"?"===n&&(n=""),n.replace(/&$/,"")},y=function(t,e,n,o){e=h(e);var r=_(n)+v(o);return e&&(r=t+e+r),r},w=function(t,e,n,o,r){var i=function(a){var c=y(t,e[a],n,o);g(c,function(t){t?a>=e.length-1?r(!0):i(a+1):r(!1)})};i(0)},m=function(e,n,o,r){if(u(o.getLib))return o._extend(o.getLib),void r(o);if(o.offline)return void r(o._get_fallback_config());var i="geetest_"+d();t[i]=function(e){r("success"===e.status?e.data:e.status?o._get_fallback_config():e),t[i]=void 0;try{delete t[i]}catch(n){}},w(o.protocol,e,n,{gt:o.gt,callback:i},function(t){t&&r(o._get_fallback_config())})},b=function(t,e){var n={networkError:"网络错误"};if("function"!=typeof e.onError)throw new Error(n[t]);e.onError(n[t])},k=function(){return!!t.Geetest};k()&&(p.slide="loaded");var E=function(e,o){var r=new n(e);e.https?r.protocol="https://":e.protocol||(r.protocol=t.location.protocol+"//"),m([r.api_server||r.apiserver],r.type_path,r,function(e){var n=e.type,i=function(){r._extend(e),o(new t.Geetest(r))};l[n]=l[n]||[];var a=p[n]||"init";"init"===a?(p[n]="loading",l[n].push(i),w(r.protocol,e.static_servers||e.domains,e[n]||e.path,null,function(t){if(t)p[n]="fail",b("networkError",r);else{p[n]="loaded";for(var e=l[n],o=0,i=e.length;i>o;o+=1){var a=e[o];s(a)&&a()}l[n]=[]}})):"loaded"===a?i():"fail"===a?b("networkError",r):"loading"===a&&l[n].push(i)})};return t.initGeetest=E,E});